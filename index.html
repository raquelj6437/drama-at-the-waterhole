<!DOCTYPE html>
 <!--Picture credit: 1st image: Pixabay, WildTraveller, 2nd image:Pixabay,3rd image: Wikimedia commons, border image: Pixabay,Clker-Free-Vector-Images-->
 
 <!--Video Credit:
     https://www.youtube.com/watch?v=yUgAjojEdUY
     https://www.youtube.com/watch?v=uwsJJjPTo6o
     https://www.youtube.com/watch?v=1nSRyzeEB4M
     https://www.youtube.com/watch?v=bUa9KCus-Cw-->
 
<html>
  <head>
    <meta charset="UTF-8">
    <title>Drama at the Waterhole</title>
    <link rel="stylesheet" href="index.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Vollkorn" rel="stylesheet">
   
  </head>
  <body>
      <div class = "border">
         <img id="border" src="images/border.png">
         <img id="border2" src="images/border.png">
     </div>
     
     <div id = "body">
         <div id = "header">
            <h1>Drama at the Waterhole</h1>
            <h4> - A Day in the Savanna.</h4>
         </div>
         <div id="intro">
             <p> There is no more water! What would you do?</p>
             <strong><p style = "font-size:20px">To watch the trailer you must submit!</p></strong>
             <form>
                 <input type="textbox" placeholder="Type Here" id="answer">
                 <button type= "button" onclick= "myFunction()">Submit</button>
             </form>
         </div>
         
         <p>Responses:</p>
         <div id="answers">
            <ul id="responses">
                
            </ul>
         </div>
         
         <div id = "description">
             <p>
                 The dusty ground is covered in shrubs as far as the eye can see... The waterhole is the hub, the meeting place. The animals from all around the Savanna come together to rehydrate in the cooling water of the waterhole. One day, something disastrous happens; the waterhole dries up! Who is to blame for this devastating rare occurrence? Where will the animals of the Savanna go? How will they find the culprit? Watch this epic tale of <span style="color:red">survival</span>, <span style="color:blue">loyalty</span>, and <span style="color:green">greed.</span> <br>
                 <p id=theatre>“Drama at the Waterhole” coming to a Movie Theatre near you.</p> 
             </p>
         </div>
         
         <div id = "pictures">
             <img class= "moviePic" src="images/elephants.jpg">
            
             <img class="moviePic" src="images/mammal.jpg">
             
             <img class="moviePic" src="images/waterhole.jpg">
             
         </div>
         
         <div>
            <video width="100%" height="500" id = "myvideo" onclick="movieClick()">
                <source src="images/Drama-At-the-Waterhole.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
         </div>
         
         <div id = "newsletter">
             <p> Want to hear more? Sign up for our newsletter and get the latest news on the movie!</p>
             <form>
                 <input type="textbox" placeholder="Enter e-mail">
                 <button type="button">Submit</button>
             </form>
             
             <p><a href="sequel.html">Click here for the sequel!</a></p>
         </div>
     </div>
     <script>
      var go = 1
      var play = 0
        
        function myFunction() {
            var answerValue2 = document.getElementById('answer').value
            var answerValue = answerValue2.trim()
            var video = document.getElementById("myvideo");

            if (answerValue === ""){
                window.alert("Please type in a word or a sentence. Thank you!")
                video.removeAttribute("controls")
            }
            else{
                if(go == 1){
                    video.setAttribute("controls","controls")
                    writeUserData(answerValue);
                
                    var x = document.getElementById("description");
                    if (x.style.display == "none") {
                        x.style.display = "block";
                    } 
                    else {
                        x.style.display = "block";
                    }
                    go = 0
                    play = 1
                }
                else{
                    window.alert("Refresh the page to submit again.")
                }
            }
        }
        
        function movieClick(){
            if (play === 0){
                document.body.scrollTop = 0;
                document.documentElement.scrollTop = 0;
                
                window.alert("You have to submit an answer before playing the trailer.")
            }
        }
    </script>

    <script src="https://www.gstatic.com/firebasejs/4.8.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDmkTeM-bQoCYxxodt1-AwTovi2SlKOe_s",
        authDomain: "drama-at-the-waterhole-1.firebaseapp.com",
        databaseURL: "https://drama-at-the-waterhole-1.firebaseio.com",
        projectId: "drama-at-the-waterhole-1",
        storageBucket: "drama-at-the-waterhole-1.appspot.com",
        messagingSenderId: "661691233626"
      };
      firebase.initializeApp(config);
      
      var database = firebase.database();
      
      function writeUserData(answerValue) {
        firebase.database().ref('repsonses/'+ answerValue).set({
            value:answerValue
          });
          
          var ref = firebase.database().ref();
            ref.once("value")
              .then(function(snapshot) {

                var name = snapshot.child("repsonses/").val();
                var ansArray = Object.keys(name)
                
                var items = document.getElementById("responses");
                for (var i = 0; i < ansArray.length; i++ ) {
                    var item = document.createElement("li");
                    item.innerHTML = ansArray[i];
                    items.appendChild(item);
                }
                
                console.log(ansArray)
              });
        }
        
    </script>
    
  </body>
</html>